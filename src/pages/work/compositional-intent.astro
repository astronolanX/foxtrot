---
import Base from "../../layouts/Base.astro";
---

<Base title="Compositional Intent Graphs · Nolan">
  <div class="project">
    <!-- Grain overlay -->
    <div class="grain" aria-hidden="true"></div>

    <!-- Back link -->
    <nav class="back">
      <a href="/" class="back-link">← back</a>
    </nav>

    <!-- Hero -->
    <header class="hero">
      <span class="hero-tag">theory</span>
      <h1 class="hero-title">Compositional Intent Graphs</h1>
      <p class="hero-meta">Design Systems Infrastructure</p>
    </header>

    <!-- Content -->
    <main class="content">
      <section class="intro">
        <p class="lead">
          Components don't exist in isolation—they exist in relationships. A
          graph-based model that captures not just what components are, but
          how they're meant to work together.
        </p>
      </section>

      <!-- Image placeholder -->
      <figure class="media">
        <div class="media-placeholder">
          <span>intent graph visualization</span>
        </div>
      </figure>

      <section class="body">
        <h2>The Problem</h2>
        <p>
          Design systems document components as independent units. Button has
          props. Card has slots. Modal has variants. But the real knowledge—
          which components belong together, which combinations violate intent,
          which patterns work at scale—lives in tribal knowledge and code review
          comments.
        </p>
        <p>
          AI agents generating UI lack this compositional understanding. They
          can read component APIs but not the invisible graph of relationships
          between them.
        </p>

        <h2>The Proposal</h2>
        <p>
          Explicit graphs of component relationships. Not just "Button exists"
          but "Button + Icon is valid, Button inside Button is invalid, Button
          in Card footer is the primary action pattern."
        </p>

        <div class="callout">
          <p>Nodes: Components with their constraints</p>
          <p>Edges: Valid compositions with context</p>
          <p>Weights: Preference scores for common patterns</p>
        </div>

        <p>
          When an agent proposes a component tree, the graph validates structure
          before rendering. Invalid compositions fail fast with explanations.
          Unusual-but-valid combinations get flagged for human review.
        </p>

        <h2>Why Now</h2>
        <p>
          Agentic development doesn't just generate components—it generates
          compositions. The failure mode isn't "wrong button" but "wrong
          arrangement of correct buttons." Current linting catches syntax;
          intent graphs catch semantics.
        </p>
        <p>
          GraphQL proved that explicit schemas beat implicit assumptions. The
          same principle applies: make the composition rules machine-readable,
          and machines can follow them.
        </p>

        <h2>Prior Art</h2>
        <p>
          Figma's auto-layout constraints. SwiftUI's view builder restrictions.
          HTML's content model (block vs inline). BEM methodology's implicit
          hierarchy. The concept exists in fragments—it needs consolidation
          into a formal, queryable structure.
        </p>
      </section>

      <!-- Image placeholder -->
      <figure class="media wide">
        <div class="media-placeholder">
          <span>composition validation flow</span>
        </div>
      </figure>

      <section class="details">
        <div class="detail">
          <span class="detail-label">Domain</span>
          <span class="detail-value">Component Relationships</span>
        </div>
        <div class="detail">
          <span class="detail-label">Status</span>
          <span class="detail-value">Theoretical Proposal</span>
        </div>
        <div class="detail">
          <span class="detail-label">Dependencies</span>
          <span class="detail-value">Schema Definition, Graph DB</span>
        </div>
      </section>
    </main>

    <!-- Next project -->
    <footer class="next">
      <a href="/work/onboarding-digitization" class="next-link">
        <span class="next-label">Next</span>
        <span class="next-title">Onboarding Digitization</span>
      </a>
    </footer>
  </div>
</Base>

<style>
  .project {
    position: relative;
    min-height: 100vh;
    background: var(--color-paper);
    color: var(--color-ink);
  }

  .grain {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1000;
    opacity: 0.04;
    mix-blend-mode: multiply;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }

  .back {
    position: fixed;
    top: 2rem;
    left: 2rem;
    z-index: 100;
  }

  .back-link {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    transition: color 0.2s ease;
  }

  .back-link:hover {
    color: var(--color-ink);
  }

  .hero {
    padding: 8rem 2rem 4rem;
    max-width: 48rem;
    margin: 0 auto;
  }

  .hero-tag {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    display: block;
    margin-bottom: 1rem;
    text-transform: lowercase;
  }

  .hero-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 400;
    line-height: 1.1;
    margin-bottom: 1rem;
    color: var(--color-ink);
  }

  .hero-meta {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
  }

  .content {
    max-width: 48rem;
    margin: 0 auto;
    padding: 0 2rem 4rem;
  }

  .intro {
    margin-bottom: 3rem;
  }

  .lead {
    font-size: var(--font-size-lg);
    line-height: 1.5;
    color: var(--color-ink-secondary);
  }

  .body h2 {
    font-family: var(--font-display);
    font-size: var(--font-size-base);
    font-weight: 400;
    margin: 3rem 0 1rem;
    text-transform: lowercase;
    letter-spacing: 0.05em;
    color: var(--color-ink);
  }

  .body p {
    margin-bottom: 1rem;
    color: var(--color-ink-secondary);
    line-height: 1.7;
  }

  .callout {
    border-left: 2px solid var(--color-ink);
    padding-left: 1.5rem;
    margin: 2rem 0;
  }

  .callout p {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink);
    font-style: normal;
    margin: 0.5rem 0;
  }

  .callout p:first-child {
    margin-top: 0;
  }

  .callout p:last-child {
    margin-bottom: 0;
  }

  .media {
    margin: 3rem 0;
  }

  .media.wide {
    margin: 3rem -2rem;
    max-width: calc(100% + 4rem);
  }

  .media-placeholder {
    aspect-ratio: 16/9;
    background: var(--color-paper-warm);
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .media-placeholder span {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
  }

  .details {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(0,0,0,0.1);
  }

  .detail-label {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    display: block;
    margin-bottom: 0.5rem;
  }

  .detail-value {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-ink);
  }

  .next {
    background: var(--color-paper-warm);
    border-top: 1px solid rgba(0,0,0,0.05);
    padding: 4rem 2rem;
  }

  .next-link {
    display: block;
    max-width: 48rem;
    margin: 0 auto;
    color: var(--color-ink);
    transition: opacity 0.2s ease;
  }

  .next-link:hover {
    opacity: 0.6;
  }

  .next-label {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    display: block;
    margin-bottom: 0.5rem;
  }

  .next-title {
    font-family: var(--font-display);
    font-size: var(--font-size-xl);
    color: var(--color-ink);
  }

  .back-link:focus-visible,
  .next-link:focus-visible {
    outline: 2px solid var(--color-ink);
    outline-offset: 4px;
  }

  .back-link:active {
    opacity: 0.5;
  }

  .next-link:active {
    opacity: 0.4;
  }

  @media (max-width: 768px) {
    .hero {
      padding: 6rem 1.5rem 3rem;
    }

    .content {
      padding: 0 1.5rem 3rem;
    }

    .back {
      left: 1.5rem;
      top: 1.5rem;
    }

    .next {
      padding: 3rem 1.5rem;
    }
  }

  @media (max-width: 640px) {
    .back {
      position: relative;
      top: auto;
      left: auto;
      padding: 1.5rem;
    }

    .back-link {
      padding: 0.5rem;
      margin: -0.5rem;
    }

    .hero {
      padding: 1rem 1.5rem 2rem;
    }

    .hero-title {
      font-size: 1.75rem;
    }

    .content {
      padding: 0 1.5rem 2rem;
    }

    .lead {
      font-size: var(--font-size-base);
    }

    .details {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .media.wide {
      margin: 2rem -1.5rem;
      max-width: calc(100% + 3rem);
    }

    .next {
      padding: 2rem 1.5rem;
    }

    .next-link {
      padding: 1rem;
      margin: -1rem;
    }

    .next-title {
      font-size: var(--font-size-lg);
    }
  }

  @media (max-width: 380px) {
    .hero-title {
      font-size: 1.5rem;
    }

    .body h2 {
      font-size: var(--font-size-sm);
    }
  }
</style>

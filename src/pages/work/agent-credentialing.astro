---
import Base from "../../layouts/Base.astro";
import Diagram from "../../components/Diagram.astro";
import CodeTabs from "../../components/CodeTabs.astro";
import ComponentDemo from "../../components/ComponentDemo.astro";
---

<Base title="Agent Credentialing System · Nolan">
  <div class="project">
    <!-- Grain overlay -->
    <div class="grain" aria-hidden="true"></div>

    <!-- Back link -->
    <nav class="back">
      <a href="/" class="back-link">← back</a>
    </nav>

    <!-- Hero -->
    <header class="hero">
      <div class="wip-badge">Work in Progress</div>
      <span class="hero-tag">theory</span>
      <h1 class="hero-title">Agent Credentialing System</h1>
      <p class="hero-meta">Design Systems Infrastructure</p>
    </header>

    <!-- Content -->
    <main class="content">
      <section class="intro">
        <p class="lead">
          Not all agents deserve the same permissions. A graduated trust model
          where design system access scales with demonstrated competence.
        </p>
      </section>

      <Diagram
        caption="Progressive trust levels for AI agents"
        definition={`flowchart LR
    L0[Level 0: Sandbox]
    L1[Level 1: Trusted]
    L2[Level 2: Full Access]
    L0 -->|earn trust| L1
    L1 -->|prove competence| L2`}
      />

      <section class="body">
        <h2>The Problem</h2>
        <p>
          Today's design systems treat all consumers equally—whether human,
          junior developer, or autonomous agent. An AI with no track record
          gets the same access as a seasoned engineer. The result: violations
          at scale, broken patterns propagated faster than humans can catch them.
        </p>
        <p>
          The alternative—blocking AI entirely—surrenders competitive advantage.
          Organizations need a middle path: trust that's earned, not assumed.
        </p>

        <h2>The Proposal</h2>
        <p>
          Tiered permissions based on demonstrated competence. New agents start
          in a sandbox: full read access, but writes require human approval.
          As they accumulate successful interactions without violations, they
          graduate to higher trust levels.
        </p>

        <div class="callout">
          <p>Level 0: Read-only, all outputs reviewed</p>
          <p>Level 1: Safe patterns pre-approved, edge cases flagged</p>
          <p>Level 2: Full access, violations trigger demotion</p>
        </div>

        <p>
          The system maintains an audit trail. Not just what an agent did, but
          whether the result held up—did the design pass review? Did it ship?
          Did users complain? Trust flows from outcomes.
        </p>

        <ComponentDemo
          variant="trust-badges"
          caption="Progressive trust levels with increasing autonomy"
        />

        <CodeTabs
          tabs={[
            { label: "Request", code: `agent.request({
  action: "modify",
  target: "Button.variant",
  value: "destructive"
})`, caption: "Agent requests to modify a Button to destructive variant" },
            { label: "Evaluate", code: `system.evaluateTrust({
  agentId: "agent-7x9k",
  level: 1,
  action: "modify",
  pattern: "destructive-variant"
})
// Result: REQUIRES_REVIEW (Level 2 needed)`, caption: "System checks if agent has required trust level for this action" },
            { label: "Escalate", code: `system.escalate({
  reason: "Agent below required trust level",
  requiredLevel: 2,
  currentLevel: 1,
  reviewQueue: "design-system-changes"
})`, caption: "Insufficient trust triggers escalation to human review" },
            { label: "Graduate", code: `system.promote({
  agentId: "agent-7x9k",
  from: 1,
  to: 2,
  reason: "50 successful modifications, 0 violations"
})`, caption: "Consistent success leads to trust level promotion" }
          ]}
        />

        <h2>Why Now</h2>
        <p>
          Enterprises can't decide whether to embrace or block AI tools. 53%
          remain paralyzed by integration uncertainty. Credentialing provides
          a structured answer: embrace with guardrails. Start conservative,
          expand as confidence grows.
        </p>
        <p>
          This mirrors how organizations already handle human permissions—RBAC,
          graduated onboarding, probationary periods. The pattern exists; it
          just needs to be applied to machine consumers.
        </p>

        <h2>Prior Art</h2>
        <p>
          OAuth scopes and API rate limiting by tier. Certificate authorities
          and chain of trust. Code signing and notarization. GitHub's graduated
          permissions for Actions. The infrastructure for machine trust exists—
          design systems just haven't adopted it yet.
        </p>
      </section>

      <Diagram
        wide
        caption="Trust graduation and demotion feedback loop"
        definition={`flowchart TD
    Start[Start at Level 0] --> Interact[Successful interactions]
    Interact --> Threshold{Threshold met?}
    Threshold -->|yes| Promote[Promote one level]
    Threshold -->|no| Continue[Continue observing]
    Continue --> Interact
    Promote --> Monitor[Monitor behavior]
    Monitor --> Violation{Violation detected?}
    Violation -->|yes| Demote[Demote one level]
    Violation -->|no| Monitor
    Demote --> Monitor`}
      />

      <section class="details">
        <div class="detail">
          <span class="detail-label">Domain</span>
          <span class="detail-value">Trust & Governance</span>
        </div>
        <div class="detail">
          <span class="detail-label">Status</span>
          <span class="detail-value">Theoretical Proposal</span>
        </div>
        <div class="detail">
          <span class="detail-label">Dependencies</span>
          <span class="detail-value">Audit Logging, RBAC</span>
        </div>
      </section>
    </main>

    <!-- Next project -->
    <footer class="next">
      <a href="/work/compositional-intent" class="next-link">
        <span class="next-label">Next</span>
        <span class="next-title">Compositional Intent Graphs</span>
      </a>
    </footer>
  </div>
</Base>

<style>
  .project {
    position: relative;
    min-height: 100vh;
    background: var(--color-paper);
    color: var(--color-ink);
  }

  .grain {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1000;
    opacity: 0.04;
    mix-blend-mode: multiply;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  }

  .back {
    position: fixed;
    top: 2rem;
    left: 2rem;
    z-index: 100;
  }

  .back-link {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    transition: all 0.2s ease;
  }

  .back-link:hover {
    color: var(--color-paper);
    background: var(--color-ink);
    padding: 0.2em 0.4em;
    margin: -0.2em -0.4em;
  }

  .hero {
    padding: 8rem 2rem 4rem;
    max-width: 48rem;
    margin: 0 auto;
  }

  .wip-badge {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-paper);
    background: var(--color-ink);
    padding: 0.25em 0.6em;
    display: inline-block;
    margin-bottom: 1.5rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .hero-tag {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    display: block;
    margin-bottom: 1rem;
    text-transform: lowercase;
  }

  .hero-title {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 400;
    line-height: 1.1;
    margin-bottom: 1rem;
    color: var(--color-ink);
  }

  .hero-meta {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
  }

  .content {
    max-width: 48rem;
    margin: 0 auto;
    padding: 0 2rem 4rem;
  }

  .intro {
    margin-bottom: 3rem;
  }

  .lead {
    font-size: var(--font-size-lg);
    line-height: 1.5;
    color: var(--color-ink-secondary);
  }

  .body h2 {
    font-family: var(--font-display);
    font-size: var(--font-size-base);
    font-weight: 400;
    margin: 3rem 0 1rem;
    text-transform: lowercase;
    letter-spacing: 0.05em;
    color: var(--color-ink);
  }

  .body p {
    margin-bottom: 1rem;
    color: var(--color-ink-secondary);
    line-height: 1.7;
  }

  .callout {
    border-left: 2px solid var(--color-ink);
    padding-left: 1.5rem;
    margin: 2rem 0;
  }

  .callout p {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink);
    font-style: normal;
    margin: 0.5rem 0;
  }

  .callout p:first-child {
    margin-top: 0;
  }

  .callout p:last-child {
    margin-bottom: 0;
  }

  .media {
    margin: 3rem 0;
  }

  .media.wide {
    margin: 3rem -2rem;
    max-width: calc(100% + 4rem);
  }

  .media-placeholder {
    aspect-ratio: 16/9;
    background: var(--color-paper-warm);
    border: 1px solid rgba(0,0,0,0.08);
    border-radius: 0.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .media-placeholder span {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
  }

  .details {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(0,0,0,0.1);
  }

  .detail-label {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    display: block;
    margin-bottom: 0.5rem;
  }

  .detail-value {
    font-family: var(--font-body);
    font-size: var(--font-size-sm);
    color: var(--color-ink);
  }

  .next {
    background: var(--color-paper-warm);
    border-top: 1px solid rgba(0,0,0,0.05);
    padding: 4rem 2rem;
  }

  .next-link {
    display: block;
    max-width: 48rem;
    margin: 0 auto;
    color: var(--color-ink);
    transition: all 0.2s ease;
  }

  .next-link:hover {
    opacity: 1;
  }

  .next-link:hover .next-title {
    background: var(--color-ink);
    color: var(--color-paper);
    padding: 0.15em 0.35em;
    margin: -0.15em -0.35em;
  }

  .next-label {
    font-family: var(--font-display);
    font-size: var(--font-size-sm);
    color: var(--color-ink-muted);
    display: block;
    margin-bottom: 0.5rem;
  }

  .next-title {
    font-family: var(--font-display);
    font-size: var(--font-size-xl);
    color: var(--color-ink);
    transition: all 0.2s ease;
  }

  .back-link:focus-visible,
  .next-link:focus-visible {
    outline: 2px solid var(--color-ink);
    outline-offset: 4px;
  }

  .back-link:active {
    opacity: 0.5;
  }

  .next-link:active {
    opacity: 0.4;
  }

  @media (max-width: 768px) {
    .hero {
      padding: 6rem 1.5rem 3rem;
    }

    .content {
      padding: 0 1.5rem 3rem;
    }

    .back {
      left: 1.5rem;
      top: 1.5rem;
    }

    .next {
      padding: 3rem 1.5rem;
    }
  }

  @media (max-width: 640px) {
    .back {
      position: relative;
      top: auto;
      left: auto;
      padding: 1.5rem;
    }

    .back-link {
      padding: 0.5rem;
      margin: -0.5rem;
    }

    .hero {
      padding: 1rem 1.5rem 2rem;
    }

    .hero-title {
      font-size: 1.75rem;
    }

    .content {
      padding: 0 1.5rem 2rem;
    }

    .lead {
      font-size: var(--font-size-base);
    }

    .details {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .media.wide {
      margin: 2rem -1.5rem;
      max-width: calc(100% + 3rem);
    }

    .next {
      padding: 2rem 1.5rem;
    }

    .next-link {
      padding: 1rem;
      margin: -1rem;
    }

    .next-title {
      font-size: var(--font-size-lg);
    }
  }

  @media (max-width: 380px) {
    .hero-title {
      font-size: 1.5rem;
    }

    .body h2 {
      font-size: var(--font-size-sm);
    }
  }
</style>
